<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Edit Pending Campaign | SlumLink</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <style>
    :root{
      --ink:#613729;
      --paper:#FFF4E6;
      --grad: linear-gradient(116.82deg,#CBB093 21.58%,#E0C7AC 31.36%,#F8E5CF 50.73%,#C0E0D0 71.52%);
      --btn-grad: linear-gradient(143.48deg, rgba(164,98,77,0.75) 38.34%, rgba(223,164,119,0.75) 78.43%);
      --radius-lg:40px;
      --radius-md:20px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Poppins',sans-serif;
      background:var(--grad);
      color:var(--ink);
      min-height:100vh;
    }

    /* ===== HEADER ===== */
    .topbar{
      position:fixed;
      top:0;left:0;right:0;
      height:56px;
      background:var(--paper);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 70px;
      z-index:100;
    }
    .brand{
      display:flex;align-items:center;gap:10px;cursor:pointer;
    }
    .brand-mark{
      width:32px;height:32px;border-radius:14px;background:var(--btn-grad);
    }
    .brand-text{
      font-size:20px;font-weight:500;
      color:rgba(164,98,77,.86);
      letter-spacing:.04em;
    }
    .back-btn{
      border:none;
      background:var(--btn-grad);
      color:#fff;
      padding:8px 18px;
      border-radius:20px;
      font-size:16px;
      cursor:pointer;
      display:flex;
      gap:8px;
      align-items:center;
    }

    /* ===== PAGE ===== */
    .page{
      padding:120px 40px 80px;
      max-width:1440px;
      margin:auto;
    }

    .title-box{
      background:var(--paper);
      border-radius:40px;
      padding:24px 40px;
      margin-bottom:40px;
    }
    .title-box h1{
      font-size:48px;
      font-weight:700;
    }

    /* ===== FORM ===== */
    .form-card{
      background:radial-gradient(50% 50% at 50% 50%,
        rgba(164,98,77,.34),
        rgba(245,223,197,.34),
        rgba(205,161,137,.34));
      border:1px solid rgba(97,55,41,.6);
      border-radius:40px;
      padding:40px;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:30px;
    }

    label{
      font-size:18px;
      font-weight:600;
      margin-bottom:8px;
      display:block;
    }

    input, select, textarea{
      width:100%;
      padding:14px 18px;
      border-radius:20px;
      border:none;
      font-size:18px;
      font-family:'Poppins';
      background:#FFF4E6;
    }

    textarea{
      resize:none;
      height:200px;
      grid-column:2/4;
    }

    .full{grid-column:1/4}

    .submit-wrap{
      display:flex;
      justify-content:flex-end;
      margin-top:30px;
    }
    .submit-btn{
      background:var(--btn-grad);
      border:none;
      color:#fff;
      padding:14px 36px;
      font-size:20px;
      border-radius:20px;
      cursor:pointer;
    }

    @media(max-width:1000px){
      .form-card{grid-template-columns:1fr}
      textarea{grid-column:1}
      .full{grid-column:1}
    }

    /* ===== CONFIRM MODAL ===== */
    .modal-overlay{
      position:fixed;
      inset:0;
      background:rgba(97,55,41,0.35);
      backdrop-filter:blur(4px);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:200;
      opacity:0;
      pointer-events:none;
      transition:.3s ease;
    }

    .modal-overlay.active{
      opacity:1;
      pointer-events:auto;
    }

    .modal-box{
      background:var(--paper);
      border-radius:40px;
      padding:36px 44px;
      max-width:480px;
      text-align:center;
      box-shadow:0 25px 60px rgba(0,0,0,.25);
      animation:scaleIn .35s ease;
    }

    @keyframes scaleIn{
      from{transform:scale(.9);opacity:0}
      to{transform:scale(1);opacity:1}
    }

    .modal-box h2{
      font-size:30px;
      font-weight:700;
      margin-bottom:12px;
    }

    .modal-box p{
      font-size:18px;
      line-height:1.6;
      margin-bottom:28px;
    }

    .modal-actions{
      display:flex;
      justify-content:center;
      gap:20px;
    }

    .modal-btn{
      border:none;
      padding:12px 32px;
      font-size:18px;
      border-radius:20px;
      cursor:pointer;
      font-family:'Poppins';
    }

    .modal-btn.cancel{
      background:#e6d2bb;
      color:#613729;
    }

    .modal-btn.confirm{
      background:var(--btn-grad);
      color:#fff;
    }
  </style>
</head>

<body>

<header class="topbar">
  <div class="brand" onclick="goDashboard()">
    <img src="/src/images/slum Logo.png" alt="SlumLink Logo" class="brand-mark"/>
    <span class="brand-text">SLUMLINK</span>
  </div>
  <button class="back-btn" onclick="goDashboard()">
    <i class="fas fa-arrow-left"></i> Back to Dashboard
  </button>
</header>

<main class="page">

  <div class="title-box">
    <h1>Edit a Pending Campaign</h1>
  </div>

  <form class="form-card">

    <div>
      <label>Title</label>
      <input id="formTitle" value="Winter Blanket Drive">
    </div>

    <div>
      <label>Category</label>
      <select id="formCategory">
        <option selected>Donation</option>
        <option>Health</option>
        <option>Education</option>
      </select>
    </div>

    <div>
      <label>Target Slum Area</label>
      <select id="formSlum">
        <option selected>Diyabari</option>
        <option>Korail</option>
        <option>Mirpur</option>
      </select>
    </div>

    <div>
      <label>Date</label>
      <input id="formDate" type="date" value="2025-04-03">
    </div>

    <div>
      <label>Time</label>
      <input id="formTime" value="5 p.m">
    </div>

    <div>
      <label>Target Gender</label>
      <select id="formGender">
        <option selected>None</option>
        <option>Male</option>
        <option>Female</option>
        <option>Both</option>
      </select>
    </div>

    <div>
      <label>Age Group</label>
      <select id="formAgeGroup">
        <option selected>16–25</option>
        <option>26–40</option>
        <option>All</option>
      </select>
    </div>

    <div>
      <label>Required Education</label>
      <select id="formEducation">
        <option selected>N/A</option>
        <option>Primary</option>
        <option>Secondary</option>
      </select>
    </div>

    <div>
      <label>Skills Required</label>
      <select id="formSkills">
        <option selected>Tailoring</option>
        <option>Plumbing</option>
        <option>None</option>
      </select>
    </div>

    <div class="full">
      <label>Description</label>
      <textarea id="formDescription">Winter Clothes to be distributed among dwellers after collection from local schools, colleges, with the help of Volunteers from Social Welfare club</textarea>
    </div>

    <div class="submit-wrap full">
      <button class="submit-btn" type="submit">SUBMIT</button>
    </div>

  </form>
</main>

<!-- CONFIRM MODAL -->
<div class="modal-overlay" id="confirmModal">
  <div class="modal-box">
    <h2>Confirm Changes</h2>
    <p>Are you sure you want to save these changes?</p>
    <div class="modal-actions">
      <button class="modal-btn cancel" id="cancelBtn">Cancel</button>
      <button class="modal-btn confirm" id="confirmBtn">Yes, Save</button>
    </div>
  </div>
</div>

<script>
  function goDashboard(){
    window.location.href = "./local-dashboard.html";
  }

  const form = document.querySelector(".form-card");
  const modal = document.getElementById("confirmModal");
  const cancelBtn = document.getElementById("cancelBtn");
  const confirmBtn = document.getElementById("confirmBtn");

  let allowSubmit = false;

  form.addEventListener("submit", function(e){
    if(!allowSubmit){
      e.preventDefault();
      modal.classList.add("active");
    }
  });

  cancelBtn.onclick = () => modal.classList.remove("active");
  confirmBtn.onclick = () => {
    allowSubmit = true;
    modal.classList.remove("active");
    form.submit();
  };

  document.addEventListener('DOMContentLoaded', loadCampaignData);

  function loadCampaignData(){
    const params = new URLSearchParams(window.location.search);
    const campaignTitle = params.get('campaign');
    if(!campaignTitle) return;

    let campaigns = JSON.parse(localStorage.getItem("localAuthorityCampaigns")) || [];
    const campaign = campaigns.find(c => c.title === campaignTitle);
    if(!campaign) return;

    formTitle.value = campaign.title;
    formCategory.value = campaign.category;
    formSlum.value = campaign.slum;
    formDate.value = campaign.date;
    formTime.value = campaign.time;
    formGender.value = campaign.gender;
    formAgeGroup.value = campaign.ageGroup;
    formEducation.value = campaign.education || 'N/A';
    formSkills.value = campaign.skills || 'None';
    formDescription.value = campaign.description;
  }
</script>

</body>
</html>
